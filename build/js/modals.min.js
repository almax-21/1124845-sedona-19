var form=document.querySelector(".feedback-form"),formButton=form.querySelector(".feedback-form__button"),sentPopup=document.querySelector(".modal--sent"),errorPopup=document.querySelector(".modal--error"),popupCloseButton=document.querySelectorAll(".modal__button-close"),modalBackground=document.querySelector(".modal-background"),firstName=form.querySelector("[name=first-name]"),lastName=form.querySelector("[name=last-name]"),patronymic=form.querySelector("[name=patronymic]"),phone=form.querySelector("[name=phone-number]"),email=form.querySelector("[name=email]"),message=form.querySelector("[name=message]"),isStorageSupport=!0,firstNameStorage="",lastNameStorage="",patronymicStorage="",phoneStorage="",emailStorage="";try{firstNameStorage=localStorage.getItem("firstName"),lastNameStorage=localStorage.getItem("lastName"),patronymicStorage=localStorage.getItem("patronymic"),phoneStorage=localStorage.getItem("phone"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}firstName.focus(),firstNameStorage&&(firstName.value=firstNameStorage,lastName.focus()),lastNameStorage&&(lastName.value=lastNameStorage,patronymic.focus()),patronymicStorage&&(patronymic.value=patronymicStorage,phone.focus()),phoneStorage&&(phone.value=phoneStorage,email.focus()),emailStorage&&(email.value=emailStorage,message.focus()),formButton.addEventListener("click",function(e){errorPopup.classList.add("modal--show"),modalBackground.classList.add("modal-background--reveal"),firstName.value&&lastName.value&&phone.value&&email.value&&message.value||form.classList.add("feedback-form--required")}),form.addEventListener("submit",function(e){e.preventDefault(),errorPopup.classList.remove("modal--show"),form.classList.remove("feedback-form--required"),sentPopup.classList.add("modal--show"),isStorageSupport&&(localStorage.setItem("firstName",firstName.value),localStorage.setItem("lastName",lastName.value),localStorage.setItem("patronymic",patronymic.value),localStorage.setItem("phone",phone.value),localStorage.setItem("email",email.value))});for(var i=0;i<popupCloseButton.length;i++)popupCloseButton[i].addEventListener("click",function(e){errorPopup.classList.contains("modal--show")&&errorPopup.classList.remove("modal--show"),sentPopup.classList.contains("modal--show")&&sentPopup.classList.remove("modal--show"),modalBackground.classList.remove("modal-background--reveal")});modalBackground.addEventListener("click",function(e){errorPopup.classList.contains("modal--show")&&errorPopup.classList.remove("modal--show"),sentPopup.classList.contains("modal--show")&&sentPopup.classList.remove("modal--show"),modalBackground.classList.remove("modal-background--reveal")}),window.addEventListener("keydown",function(e){errorPopup.classList.contains("modal--show")&&errorPopup.classList.remove("modal--show"),sentPopup.classList.contains("modal--show")&&sentPopup.classList.remove("modal--show"),modalBackground.classList.remove("modal-background--reveal")});